@model List<Sindicato_Viedma.Models.ViewModels.VerLiquidacion>

@{
    ViewData["Title"] = "DDJJ";
}

<!-- Banner -->
@Html.Partial("~/Views/Shared/MisViews/Banner.cshtml")

@{
    if (ViewBag.Session != false) // Si esta logueado que se muestre la barra menu
    {
        @Html.Partial("~/Views/Shared/BarraNavegacion.cshtml")
    }

}

<div class="w3-content" style="max-width:1564px">

    <div id="id01" class="w3-modal">
        <div class="w3-modal-content">
            <div id="modal-content">
                Cargando...
            </div>
        </div>
    </div>


    <div class="w3-responsive">
        <table class="w3-table-all">
            <tr>
                <th style="width: 250px;">

                </th>
                <th></th>
                <th>ID</th>
                <th>Período DDJJ</th>
                <th>Total $ Empleados</th>
                <th>Cant. Empleados</th>
                <th>Total $ Afiliados</th>
                <th>Cant. Empleados</th>
                <th>Total a Pagar</th>
                <th></th>
                <th></th>
                <th></th>
            </tr>

            @foreach (var items in Model)
            {
                
        <tr>
            <td class="w3-blue-grey w3-border-white">
                @if (items.Pagado)
                {
                    <label>@items.EntidadRecaudadora el @items.Fecha_Pagado</label>
                }
            </td>
            <td><input name="id" class="IdEmpleado" value="@items.IdLiquidacion" hidden></td>
            <td><label>@items.IdLiquidacion</label></td>
            <td><label>@items.Periodo</label></td>
            <td><label>@items.Total</label></td>
            <td><label>@items.CantEmpleados</label></td>
            <td><label>@items.Total_Afiliado</label></td>
            <td><label>@items.CantAfiliado</label></td>
            <td><label>@items.Total_Depositar</label></td>
            @if (items.Archivo == false && items.Pagado == false)
            {
                <td><button onclick="document.getElementById('id01').style.display='block'" class="btnSubirArchivo w3-btn w3-small w3-text-light-grey bg-zul" data-id="@items.IdLiquidacion" data-toggle="modal" type="button">Subir Archivo</button></td>
            }
            else
            {
                using (Html.BeginForm("DescargarArchivoLiquidacion", "Actas", FormMethod.Post, new { @class = "w3-container", autocomplete = "off", enctype = "multipart/form-data" }))
                {
                    <input type="hidden" value="@items.IdLiquidacion" id="IdLiquidacion" name="IdLiquidacion" />
                    <td><button class="w3-btn w3-small w3-text-light-grey bg-zul" type="submit" @*onclick="DescargarLiquidacion(@items.IdLiquidacion);"*@>...</button></td>
                }
            }
            <td>
                @using (Html.BeginForm("DDJJ", "Boletas", FormMethod.Post, new { @class = "w3-container", autocomplete = "off", enctype = "multipart/form-data" }))
                {
                    <input type="hidden" value="@items.IdLiquidacion" id="param1" name="param1" />
                    <button class="w3-btn w3-small w3-text-light-grey bg-zul" type="submit" onclick="Descargar(@items.IdLiquidacion);" id="@items.IdLiquidacion">Descargar PDF</button>
                }
            </td>
            <td>
                @using (Html.BeginForm("DescargarHistorial", "Liquidacion", FormMethod.Post, new { @class = "w3-container", autocomplete = "off", enctype = "multipart/form-data" }))
                {
                    <input type="hidden" value="@items.IdLiquidacion" id="param1" name="param1" />
                    <button class="w3-btn w3-small w3-text-light-grey bg-zul" type="submit">Descargar DD.JJ.</button>
                }
            </td>

            @if (items.Pagado == false)
            {
                @*<td><button onclick="eliminar(@items.IdLiquidacion)" class="btnEliminar w3-btn w3-small w3-text-light-grey bg-zul" data-id="@items.IdLiquidacion" data-toggle="modal" type="button">Eliminar</button></td>*@
            }
        </tr>
                
            }
        </table>
    </div>

    <br><br>
    <div class="w3-bar w3-center">
        <a href="#" class="w3-button w3-hover-light-grey">««Primera</a>
        <a href="#" class="w3-button w3-hover-light-grey">«Anterior</a>
        <a href="#" class="w3-button w3-hover-light-grey">2</a>
        <a href="#" class="w3-button w3-hover-light-grey">3</a>
        <a href="#" class="w3-button w3-hover-light-grey">Siguiente»</a>
        <a href="#" class="w3-button w3-hover-light-grey">Última»»</a>
    </div>
    <br><br>
</div>


@section scripts{
    <script src="~/js/Actas.js"></script>
}

@if (!string.IsNullOrEmpty(ViewBag.Message))
{
    <script type="text/javascript">
        alert("@ViewBag.Message");
    </script>
}