@model Sindicato_Viedma.Models.ViewModels.EditarEmpleado

<div class="w3-container" style="line-height : 5px;"></div>

<div class="w3-panel w3-wide bg-zul w3-text-white w3-content w3-margin-left w3-margin-right w3-center w3-padding-24">
    EDITAR DE EMPLEADOS
</div>

<div class="w3-padding w3-margin-left small2 w3-center">

    <!-- ---------------- FORMULARIO ---------------- -->
    @using (Html.BeginForm("EditarEmpleado", "Personal", FormMethod.Post, new { @class = "w3-container", autocomplete = "off" }))
    {

        <div class="w3-row w3-container">

            <div class="w3-col l12" style="width: 33%;">
                <label style = "display: none;">N° Ficha</label>
                @Html.TextBoxFor(model => model.IdEmpleado, new { @class = "w3-input w3-border", placeholder = "Nº de Ficha", style = "display: none;" })
            </div>

            <br />
            <br />

            <div class="w3-row">
                <div class="w3-half">
                    <label>Apellido</label>
                    @Html.TextBoxFor(model => model.Apellido, new { @class = "w3-input w3-border", placeholder = "Apellido", id = "Apellido" })
                </div>
                <div class="w3-half">
                    <label>Nombre</label>
                    @Html.TextBoxFor(model => model.Nombre, new { @class = "w3-input w3-border", placeholder = "Nombre", id = "Nombre" })
                </div>
            </div>

            <br />

            <div class="w3-row">
                <div class="w3-col w3-container" style="width: 33%;">
                    <select asp-for="TipoDoc" class="w3-select" name="TipoDoc">
                        @{
                            if (ViewData["TipoDoc"] != null)
                            {
                                IEnumerable<dynamic> documentos = (IEnumerable<dynamic>)ViewData["TipoDoc"];

                                foreach (dynamic documento in documentos)
                                {
                                    string NombreDocumento = documento.NombreDocumento;
                                    int IdDocumento = documento.IdDocumento;
                                    <option value="@documento.IdDocumento">@NombreDocumento.ToUpper()</option>
                                }
                            }
                        }
                    </select>
                </div>
                <div class="w3-col w3-container" style="width: 33%;">
                    @Html.TextBoxFor(model => model.CUIL, new { @class = "w3-input w3-border", placeholder = "N° sin puntos o guiones", id = "CUIL" })
                </div>
                <div class="w3-col w3-container" style="width: 33%;">
                    @Html.DropDownListFor(model => model.Sexo, new List<SelectListItem> { new SelectListItem { Value = "Masculino", Text = "Masculino" }, new SelectListItem { Value = "Femenino", Text = "Femenino" }, new SelectListItem { Value = "-", Text = "-" }  }, new { @class = "w3-select", name = "Sexo" })
                </div>
            </div>

            <br>

            <div class="w3-row">
                <div class="w3-col w3-container" style="width: 33%;">
                    <label>Fecha Nacimiento</label>
                    @Html.TextBoxFor(model => model.Fecha_Nacimiento, "{0:yyyy-MM-dd}", new { @class = "w3-input w3-border", placeholder = "Nac:DD/MM/AA", id = "FechaNac", type = "date", min = "1940-01-01", max = "2040-01-01" })
                </div>
                <div class="w3-col w3-container" style="width: 33%;">
                    <label>Categoria</label>
                    @*@Html.DropDownListFor(m => m.Categoria, (List<SelectListItem>)ViewBag.Categoria, "<Seleccione un item>", new { @class = "w3-select", name = "Categoria", onChange = "VerSusSubcategorias()", id = "Categorias" })*@

                    <select class="w3-select" name="Categoria" id="Categorias">
                        @{
                            if (ViewData["Categoria"] != null)
                            {
                                IEnumerable<dynamic> Categorias = (IEnumerable<dynamic>)ViewData["Categoria"];
                                <option value="0">< Seleccione un Item ></option>
                                foreach (dynamic Categoria in Categorias)
                                {
                                    string NombreCategoria = Categoria.NombreCategoria;
                                    int IdCategoria = Categoria.IdCategoria;
                                    <option value="@IdCategoria">@NombreCategoria.ToUpper()</option>
                                }
                            }
                        }
                    </select>
                    @Html.HiddenFor(model => model.Categoria, new { name = "Ctg", id = "Ctg" })

                    <script>
                        var SelectCategoria = document.getElementById("Categorias");
                        var valorPreestablecido = document.getElementById("Ctg").value;

                        for (var z = 0; z < SelectCategoria.children.length; z++) {
                            var value = SelectCategoria.options[z].value;
                            if (valorPreestablecido == value) {
                                SelectCategoria.options[z].setAttribute("selected", "selected");
                            }
                        }
                    </script>

                </div>

                <div class="w3-col w3-container" style="width: 33%;">
                    @*<label>Subcategoria</label>*@
                    @*@Html.DropDownListFor(m => m.SubCategoria, (List<SelectListItem>)ViewBag.subcategoria, "<Seleccione un item>", new { @class = "w3-select", name = "SubCategoria", onChange = "guardarSubcategoria()", id = "Subcategorias" })*@

                    @*<select class="w3-select" name="SubCategoria" id="Subcategorias" onchange="guardarSubcategoria()">
                        @{
                            if (ViewData["subcategoria"] != null)
                            {
                                IEnumerable<dynamic> subcategorias = (IEnumerable<dynamic>)ViewData["subcategoria"];
                                <option value="0">< Seleccione un Item ></option>
                                foreach (dynamic subcategoria in subcategorias)
                                {
                                    string NombreSubcategoria = subcategoria.NombreSubcategoria;
                                    int IdCategoria = subcategoria.IdCategoria;
                                    <option value="@IdCategoria" hidden>@NombreSubcategoria.ToUpper()</option>
                                }
                            }
                        }
                    </select>
                    <input type="hidden" value="@ViewBag.NombreSubcategoria" id="nmbCategoria" />

                    <script>
                        var SelectSubcategoria = document.getElementById("Subcategorias");
                        var valorPreestablecidoCtg = document.getElementById("Ctg").value;
                        var valorPreestablecidoNmb = document.getElementById("nmbCategoria").value;

                        for (var z = 0; z < SelectSubcategoria.children.length; z++) {
                            var value = SelectSubcategoria.options[z].value;
                            var text = SelectSubcategoria.options[z].text;
                            if (valorPreestablecidoCtg == value) {
                                SelectSubcategoria.options[z].style.display = "block";
                                if (valorPreestablecidoNmb == text) {
                                    SelectSubcategoria.options[z].setAttribute("selected", "selected");
                                }
                            } else {
                                SelectSubcategoria.options[z].style.display = "none";
                            }

                        }
                    </script>
                    <input type="hidden" id="NombreSubcategoria" value="@ViewBag.NombreSubcategoria" name="NombreSubcategoria" />*@
                </div>
            </div>
            <br>

            <div class="w3-row">
                <div class="w3-col w3-container" style="width: 33%;">
                    <label>Fecha Ingreso</label>
                    @Html.TextBoxFor(model => model.Fecha_Ingreso, "{0:yyyy-MM-dd}", new { @class = "w3-input w3-border", placeholder = "F.Ingr.: DD/MM/AA", id = "FechaIng", type = "date", min = "1940-01-01", max = "2040-01-01" })
                </div>

                <div class="w3-col w3-container" style="width: 33%;">
                    <label>Remun.</label>
                    <input type="text" class="w3-input w3-border" id="Remun" name="Remun" value="@ViewBag.Remun"  onchange = "cambiarSigno()"/>
                </div>

                @*<div class="w3-col w3-container" style="width: 33%;">
                    <label>No Remun.</label>
                    <input type="text" class="w3-input w3-border" id="noRemun" name="noRemun" value="@ViewBag.NoRemun"  onchange = "cambiarSigno()"/>
                </div>*@


            </div>

            <br />

            <div class="w3-row">

                <div class="w3-col w3-container" style="width: 33%;">
                    @Html.CheckBoxFor(model => model.Afiliado, new { @class = "w3-check", type = "checkbox" })
                    <label>Afiliado</label>
                </div>

                <div class="w3-col w3-container" style="width: 33%;">
                    <label>Cant. Horas Mensuales</label>
                    @Html.TextBoxFor(model => model.CantHoras, new { @class = "w3-input w3-border", placeholder = "Cantidad Horas", @type = "number", @value = "400", @min = "1", @max = "200" })
                </div>

                <div class="w3-col w3-container" style="width: 33%;">
                    <label>Estado</label>
                    @Html.DropDownListFor(model => model.Estado, new List<SelectListItem> { new SelectListItem { Value = "1", Text = "ACTIVO" }, new SelectListItem { Value = "2", Text = "LICENCIA SUJETA A RETENCIONES" }, new SelectListItem { Value = "3", Text = "LICENCIA SIN RETENCIONES" } }, new { @class = "w3-select", name = "Estado" })
                    <script>
                        var estado = ViewBag.estado;
                        document.getElementByName('Estado').value = estado;
                    </script>
                </div>
            </div>

            <div class="w3-row">
                <div class="w3-col w3-container" style="width: 33%;">
                    <p><button class="w3-btn w3-text-white bg-zul w3-hover-zul" type="submit" onclick="return verificarCargaEmpleado()">Guardar..</button></p>
                    <p><button class="w3-btn w3-text-white bg-zul w3-hover-zul" type="button" onclick="cerrarId01()">Cancelar</button></p>
                </div>
            </div>
        </div>
    }

</div>

@if (!string.IsNullOrEmpty(ViewBag.modificarEmpleado))
{
    <script type="text/javascript">
        alert("@ViewBag.modificarEmpleado");
    </script>
}

@section scripts{
    <script src="~/js/optionSelect.js"></script>
    <script src="~/js/modalRegistrarse.js"></script>
}




